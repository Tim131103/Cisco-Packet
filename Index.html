<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interaktive Mars-Netzwerk Simulation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* Dunkelgrau/Blau */
        }
        .topology-bg {
            background-image: url('https://placehold.co/1200x800/000000/FFFFFF?text=Mars+Oberflaeche');
            background-size: cover;
            background-position: center;
            position: relative;
        }
        .topology-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(17, 24, 39, 0.7); /* Overlay */
            z-index: 1;
        }
        svg, .info-panel, .controls, .documentation-section {
            position: relative;
            z-index: 2;
        }
        .device, .zone-rect, .doc-card {
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .device:hover, .zone-rect:hover {
            filter: drop-shadow(0 0 8px #f59e0b); /* Leuchteffekt */
        }
        .doc-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(245, 158, 11, 0.2), 0 4px 6px -2px rgba(245, 158, 11, 0.1);
        }
        .link-line {
            stroke-dasharray: 4;
            animation: dash 1s linear infinite;
        }
        @keyframes dash {
            to {
                stroke-dashoffset: 8;
            }
        }
        .status-dot {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .tooltip {
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .device:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }
        /* Modal Styles */
        .modal {
            transition: opacity 0.25s ease;
        }
        .modal-content {
            transition: transform 0.25s ease;
        }
    </style>
</head>
<body class="text-gray-200">

    <div class="container mx-auto p-4 md:p-8">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-amber-400">Mars-Basis "AresConnect"</h1>
            <p class="text-lg text-gray-400 mt-2">Interaktive Simulation der Netzwerk-Topologie & Dokumentation</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12">
            <!-- Linke Spalte: Topologie -->
            <div class="lg:col-span-2 bg-gray-900 rounded-xl shadow-2xl p-4 topology-bg">
                <svg id="network-topology" viewBox="0 0 1200 800" class="w-full h-auto">
                    <!-- Zonen -->
                    <g id="zone-crew" class="zone">
                        <rect x="50" y="50" width="350" height="300" fill="rgba(34, 197, 94, 0.1)" stroke="#22c55e" stroke-width="2" rx="15" class="zone-rect"/>
                        <text x="70" y="80" font-size="24" fill="#22c55e" font-weight="bold">Crew & Gym Zone</text>
                    </g>
                    <g id="zone-science" class="zone">
                        <rect x="50" y="450" width="350" height="300" fill="rgba(59, 130, 246, 0.1)" stroke="#3b82f6" stroke-width="2" rx="15" class="zone-rect"/>
                        <text x="70" y="480" font-size="24" fill="#3b82f6" font-weight="bold">Science Lab</text>
                    </g>
                     <g id="zone-resource" class="zone">
                        <rect x="800" y="50" width="350" height="300" fill="rgba(168, 85, 247, 0.1)" stroke="#a855f7" stroke-width="2" rx="15" class="zone-rect"/>
                        <text x="820" y="80" font-size="24" fill="#a855f7" font-weight="bold">Resource Zone</text>
                    </g>
                    <g id="zone-greenhouse" class="zone">
                        <rect x="800" y="450" width="350" height="300" fill="rgba(239, 68, 68, 0.1)" stroke="#ef4444" stroke-width="2" rx="15" class="zone-rect"/>
                        <text x="820" y="480" font-size="24" fill="#ef4444" font-weight="bold">Greenhouse</text>
                    </g>
                    <g id="zone-core" class="zone">
                         <rect x="450" y="150" width="300" height="450" fill="rgba(245, 158, 11, 0.1)" stroke="#f59e0b" stroke-width="2" rx="15" class="zone-rect"/>
                        <text x="510" y="180" font-size="24" fill="#f59e0b" font-weight="bold">Core Network</text>
                    </g>
                    <g id="zone-earth" class="zone">
                         <rect x="450" y="650" width="300" height="100" fill="rgba(20, 184, 166, 0.1)" stroke="#14b8a6" stroke-width="2" rx="15" class="zone-rect"/>
                        <text x="525" y="680" font-size="24" fill="#14b8a6" font-weight="bold">Earth Uplink</text>
                    </g>

                    <!-- Linien -->
                    <line x1="550" y1="300" x2="300" y2="200" stroke="#f59e0b" stroke-width="3" class="link-line"/>
                    <line x1="650" y1="300" x2="300" y2="200" stroke="#f59e0b" stroke-width="3" class="link-line"/>
                    <line x1="550" y1="350" x2="300" y2="600" stroke="#f59e0b" stroke-width="3" class="link-line"/>
                    <line x1="650" y1="350" x2="300" y2="600" stroke="#f59e0b" stroke-width="3" class="link-line"/>
                    <line x1="550" y1="400" x2="900" y2="200" stroke="#f59e0b" stroke-width="3" class="link-line"/>
                    <line x1="650" y1="400" x2="900" y2="200" stroke="#f59e0b" stroke-width="3" class="link-line"/>
                    <line x1="550" y1="450" x2="900" y2="600" stroke="#f59e0b" stroke-width="3" class="link-line"/>
                    <line x1="650" y1="450" x2="900" y2="600" stroke="#f59e0b" stroke-width="3" class="link-line"/>
                    <line x1="600" y1="550" x2="600" y2="700" stroke="#f59e0b" stroke-width="3" class="link-line"/>
                    <line x1="600" y1="375" x2="600" y2="475" stroke="#ffffff" stroke-width="4" stroke-dasharray="8 8"/>
                    <text x="580" y="435" font-size="16" fill="white" transform="rotate(-90 580,435)">TRUNK</text>

                    <!-- GerÃ¤te -->
                    <g id="device-r1" class="device">
                        <circle cx="550" cy="350" r="30" fill="#1e293b" stroke="#f59e0b" stroke-width="3"/>
                        <circle id="r1-status" cx="550" cy="350" r="8" fill="#10b981" class="status-dot"/>
                        <text x="540" y="355" font-size="18" fill="white" font-weight="bold">R1</text>
                        <text class="tooltip" x="555" y="320" font-size="14" fill="white">Core Router 1 (Active)</text>
                    </g>
                    <g id="device-r1b" class="device">
                        <circle cx="650" cy="350" r="30" fill="#1e293b" stroke="#f59e0b" stroke-width="3"/>
                        <circle id="r1b-status" cx="650" cy="350" r="8" fill="#f97316" class="status-dot"/>
                        <text x="635" y="355" font-size="18" fill="white" font-weight="bold">R1-B</text>
                        <text class="tooltip" x="655" y="320" font-size="14" fill="white">Core Router 1-B (Standby)</text>
                    </g>
                    <g id="device-r2" class="device">
                        <circle cx="300" cy="200" r="25" fill="#1e293b" stroke="#22c55e" stroke-width="3"/>
                        <text x="292" y="205" font-size="18" fill="white" font-weight="bold">R2</text>
                        <text class="tooltip" x="305" y="170" font-size="14" fill="white">Router Crew/Gym</text>
                    </g>
                    <g id="device-r3" class="device">
                        <circle cx="900" cy="200" r="25" fill="#1e293b" stroke="#a855f7" stroke-width="3"/>
                        <text x="892" y="205" font-size="18" fill="white" font-weight="bold">R3</text>
                        <text class="tooltip" x="905" y="170" font-size="14" fill="white">Router Resource</text>
                    </g>
                    <g id="device-r4" class="device">
                        <circle cx="300" cy="600" r="25" fill="#1e293b" stroke="#3b82f6" stroke-width="3"/>
                        <text x="292" y="605" font-size="18" fill="white" font-weight="bold">R4</text>
                        <text class="tooltip" x="305" y="570" font-size="14" fill="white">Router Science Lab</text>
                    </g>
                    <g id="device-r5" class="device">
                        <circle cx="900" cy="600" r="25" fill="#1e293b" stroke="#ef4444" stroke-width="3"/>
                        <text x="892" y="605" font-size="18" fill="white" font-weight="bold">R5</text>
                        <text class="tooltip" x="905" y="570" font-size="14" fill="white">Router Greenhouse</text>
                    </g>
                    <g id="device-r6" class="device">
                        <circle cx="600" cy="700" r="25" fill="#1e293b" stroke="#14b8a6" stroke-width="3"/>
                        <text x="592" y="705" font-size="18" fill="white" font-weight="bold">R6</text>
                        <text class="tooltip" x="605" y="670" font-size="14" fill="white">Router Earth Uplink</text>
                    </g>
                </svg>
            </div>

            <!-- Rechte Spalte: Info & Steuerung -->
            <div class="flex flex-col gap-8">
                <div id="info-panel" class="info-panel bg-gray-800/80 backdrop-blur-sm rounded-xl shadow-lg p-6 flex-grow">
                    <h2 id="info-title" class="text-2xl font-bold text-amber-400 mb-4">Info-Panel</h2>
                    <p id="info-placeholder" class="text-gray-400">Fahre mit der Maus Ã¼ber ein GerÃ¤t oder eine Zone, um Details anzuzeigen.</p>
                    <div id="info-content" class="hidden space-y-2 text-sm">
                        <!-- Content wird via JS eingefÃ¼gt -->
                    </div>
                </div>
                <div class="controls bg-gray-800/80 backdrop-blur-sm rounded-xl shadow-lg p-6">
                    <h2 class="text-2xl font-bold text-amber-400 mb-4">Simulation</h2>
                    <p class="text-gray-400 mb-4">Simuliere einen Ausfall des primÃ¤ren Core-Routers, um die HSRP-Failover-Funktion zu testen.</p>
                    <button id="failover-btn" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-4 rounded-lg transition-colors">
                        Simuliere R1-Ausfall
                    </button>
                </div>
            </div>
        </div>

        <!-- Dokumentationssektion -->
        <div class="documentation-section">
            <h2 class="text-3xl font-bold text-center text-amber-400 mb-8">Projektdokumentation</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Doc Card 1 -->
                <div class="doc-card bg-gray-800 rounded-lg p-6 flex flex-col" data-doc="config">
                    <h3 class="text-xl font-bold text-blue-400 mb-2">Finale Netzwerkkonfiguration</h3>
                    <p class="text-gray-400 flex-grow">VollstÃ¤ndige Konfigurationen aller Router (R1, R1-B, R2-R6) fÃ¼r die hybride und redundante Architektur.</p>
                    <span class="text-amber-400 mt-4 self-start hover:underline">Dokument Ã¶ffnen &rarr;</span>
                </div>
                <!-- Doc Card 2 -->
                <div class="doc-card bg-gray-800 rounded-lg p-6 flex flex-col" data-doc="stabilization">
                    <h3 class="text-xl font-bold text-green-400 mb-2">Plan zur Netzwerk-Stabilisierung</h3>
                    <p class="text-gray-400 flex-grow">Schritt-fÃ¼r-Schritt-Anleitung zur Behebung von OSPF- und HSRP-InstabilitÃ¤ten durch saubere Neukonfiguration.</p>
                    <span class="text-amber-400 mt-4 self-start hover:underline">Dokument Ã¶ffnen &rarr;</span>
                </div>
                <!-- Doc Card 3 -->
                <div class="doc-card bg-gray-800 rounded-lg p-6 flex flex-col" data-doc="hsrp">
                    <h3 class="text-xl font-bold text-orange-400 mb-2">HSRP-Demonstration</h3>
                    <p class="text-gray-400 flex-grow">Testplan und Konfigurationen zur Demonstration der Failover-FunktionalitÃ¤t mit dem Hot Standby Router Protocol.</p>
                    <span class="text-amber-400 mt-4 self-start hover:underline">Dokument Ã¶ffnen &rarr;</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="doc-modal" class="modal fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50 opacity-0 pointer-events-none">
        <div class="modal-content bg-gray-900 rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col transform scale-95">
            <div class="flex justify-between items-center p-4 border-b border-gray-700">
                <h2 id="modal-title" class="text-2xl font-bold text-amber-400">Dokumentation</h2>
                <button id="modal-close-btn" class="text-gray-400 hover:text-white">&times;</button>
            </div>
            <div id="modal-body" class="p-6 overflow-y-auto">
                <!-- Content wird via JS eingefÃ¼gt -->
            </div>
        </div>
    </div>


    <script>
        // Data for devices and zones (from previous version)
        const devices = {
            'r1': { name: 'R1 (Core Router)', status: 'Active', id: '1.1.1.1', details: `<p><strong>HSRP Status:</strong> <span class="font-bold text-green-400">Active</span></p><p><strong>HSRP Priority:</strong> 110</p><p><strong>Aufgabe:</strong> Haupt-Router fÃ¼r alle VLANs und Verbindungen. Leitet den gesamten Verkehr im Normalbetrieb.</p><p><strong>Verbindungen:</strong> R2, R3, R4, R5, R6, R1-B (Trunk)</p>` },
            'r1b': { name: 'R1-B (Redundanter Core Router)', status: 'Standby', id: '1.1.1.2', details: `<p><strong>HSRP Status:</strong> <span class="font-bold text-orange-400">Standby</span></p><p><strong>HSRP Priority:</strong> 100</p><p><strong>Aufgabe:</strong> Ãbernimmt bei Ausfall von R1 nahtlos den Betrieb.</p><p><strong>Verbindungen:</strong> R2, R3, R4, R5, R6, R1 (Trunk)</p>` },
            'r2': { name: 'R2 (Gym & Crew)', status: 'Online', id: '2.2.2.2', details: `<p><strong>Subnetze:</strong> 2001:10:20::/64 (Crew), 2001:10:21::/64 (Gym)</p><p><strong>DHCP Pools:</strong> CREW_POOL, GYM_POOL</p><p><strong>Aufgabe:</strong> Stellt Netzwerkdienste fÃ¼r die Wohnquartiere und den Fitnessbereich bereit.</p>` },
            'r3': { name: 'R3 (Resource Zone)', status: 'Online', id: '3.3.3.3', details: `<p><strong>Subnetz:</strong> 2001:10:30::/64</p><p><strong>DHCP Pool:</strong> RESOURCE_POOL</p><p><strong>Aufgabe:</strong> Anbindung der Systeme im Rohstoff-Sektor.</p>` },
            'r4': { name: 'R4 (Science Lab)', status: 'Online', id: '4.4.4.4', details: `<p><strong>Subnetz:</strong> 2001:10:40::/64 (VLAN 40)</p><p><strong>Aufgabe:</strong> Anbindung des Wissenschaftslabors. Verwaltet den Datenverkehr fÃ¼r die Forschung.</p>` },
            'r5': { name: 'R5 (Greenhouse)', status: 'Online', id: '5.5.5.5', details: `<p><strong>Subnetz:</strong> 2001:10:50::/64</p><p><strong>DHCP Pool:</strong> GREENHOUSE_POOL</p><p><strong>Aufgabe:</strong> Netzwerk fÃ¼r die automatisierten Systeme im GewÃ¤chshaus.</p>` },
            'r6': { name: 'R6 (Earth Uplink)', status: 'Online', id: 'N/A', details: `<p><strong>Aufgabe:</strong> BÃ¼ndelt den Verkehr zur Erde. Hier greift die ACL, die nur Forschungsdaten durchlÃ¤sst.</p><p><strong>Route:</strong> Statische Route zum Mars-Netzwerk via HSRP Virtual IP.</p>` }
        };
        const zones = {
            'crew': { name: 'Crew & Gym Zone', details: `<p><strong>Zweck:</strong> Private Nutzung, Freizeit und Fitness.</p><p><strong>Subnetze:</strong> 2001:10:20::/64, 2001:10:21::/64</p><p><strong>Router:</strong> R2</p>` },
            'science': { name: 'Science Lab', details: `<p><strong>Zweck:</strong> Forschung und Entwicklung.</p><p><strong>Subnetz:</strong> 2001:10:40::/64 (VLAN 40)</p><p><strong>Router:</strong> R4</p>` },
            'resource': { name: 'Resource Zone', details: `<p><strong>Zweck:</strong> Rohstoffabbau und -verarbeitung.</p><p><strong>Subnetz:</strong> 2001:10:30::/64</p><p><strong>Router:</strong> R3</p>` },
            'greenhouse': { name: 'Greenhouse', details: `<p><strong>Zweck:</strong> Lebensmittelproduktion.</p><p><strong>Subnetz:</strong> 2001:10:50::/64</p><p><strong>Router:</strong> R5</p>` },
            'core': { name: 'Core Network', details: `<p><strong>Zweck:</strong> Das HerzstÃ¼ck des Netzwerks. Verbindet alle Zonen redundant.</p><p><strong>Protokolle:</strong> OSPF, HSRP</p><p><strong>GerÃ¤te:</strong> R1, R1-B</p>` },
            'earth': { name: 'Earth Uplink Zone', details: `<p><strong>Zweck:</strong> Kommunikation mit der Erde.</p><p><strong>Sicherheit:</strong> Eine Access-Control List (ACL) filtert den Verkehr, sodass nur Daten aus dem Forschungsnetz (Science Lab) zur Erde gesendet werden kÃ¶nnen.</p><p><strong>Router:</strong> R6</p>` }
        };

        // Documentation Content
        const docs = {
            'config': {
                title: 'Finale Netzwerkkonfiguration',
                content: `
                    <h4 class="text-lg font-semibold text-amber-400 mt-4 mb-2">R1 â Zentraler Router (Final Korrigiert)</h4>
                    <pre class="bg-gray-900 text-sm text-white p-4 rounded-md overflow-x-auto"><code>hostname R1
ipv6 unicast-routing
!
vlan 14
 name Link_zu_R4
vlan 15
 name Link_zu_R5
vlan 16
 name EARTH_UPLINK
!
interface GigabitEthernet0/0/0
 description Verbindung zu R2
 ipv6 address 2001:10:12::1/64
 ipv6 ospf 1 area 0
 standby 12 priority 110
!
interface Vlan14
 ipv6 address 2001:10:14::1/64
 ipv6 ospf 1 area 0
 standby 14 priority 110
... (und so weiter fÃ¼r alle Router)</code></pre>
                    <p class="mt-2 text-gray-500">Hinweis: Dies ist ein gekÃ¼rzter Auszug. Die vollstÃ¤ndige Konfiguration umfasst alle Router (R1, R1-B, R2, R3, R4, R5, R6) und Switches.</p>
                `
            },
            'stabilization': {
                title: 'Plan zur Netzwerk-Stabilisierung',
                content: `
                    <p class="mb-4">Dieser Plan behebt die OSPF-InstabilitÃ¤t, indem er die darunterliegende HSRP-Redundanz stabilisiert.</p>
                    <ol class="list-decimal list-inside space-y-4">
                        <li>
                            <strong class="text-amber-400">Konfiguration zurÃ¼cksetzen und neu anwenden (Wichtigster Schritt!)</strong>
                            <p class="text-gray-400 ml-4">Auf R1 und R1-B: <code class="bg-gray-700 p-1 rounded">write erase</code> und <code class="bg-gray-700 p-1 rounded">reload</code>. Danach die finale, korrekte Konfiguration einfÃ¼gen.</p>
                        </li>
                        <li>
                            <strong class="text-amber-400">HSRP-Status Ã¼berprÃ¼fen</strong>
                            <p class="text-gray-400 ml-4">Auf beiden Routern mit <code class="bg-gray-700 p-1 rounded">show standby brief</code> prÃ¼fen. Es muss immer ein 'Active' und ein 'Standby' Router pro Gruppe geben.</p>
                        </li>
                        <li>
                            <strong class="text-amber-400">OSPF-Prozesse neu starten</strong>
                            <p class="text-gray-400 ml-4">Auf jedem einzelnen Router den Befehl <code class="bg-gray-700 p-1 rounded">clear ipv6 ospf process</code> ausfÃ¼hren.</p>
                        </li>
                        <li>
                            <strong class="text-amber-400">Finale Verifikation</strong>
                            <p class="text-gray-400 ml-4">Mit <code class="bg-gray-700 p-1 rounded">show ipv6 route</code> und Ping/Tracert-Tests die vollstÃ¤ndige KonnektivitÃ¤t Ã¼berprÃ¼fen.</p>
                        </li>
                    </ol>
                `
            },
            'hsrp': {
                title: 'HSRP-Demonstration',
                content: `
                    <h4 class="text-lg font-semibold text-amber-400 mt-4 mb-2">Test-Topologie</h4>
                    <p>Minimales Netzwerk aus R1 (Primary), R2 (Standby), einem Switch und einem Test-PC.</p>
                    
                    <h4 class="text-lg font-semibold text-amber-400 mt-4 mb-2">IP-Adressen</h4>
                    <ul class="list-disc list-inside text-gray-400">
                        <li>R1 (Physisch): 192.168.1.2</li>
                        <li>R2 (Physisch): 192.168.1.3</li>
                        <li><strong>Virtuelle IP (Gateway): 192.168.1.1</strong></li>
                        <li>PC1: 192.168.1.100</li>
                    </ul>

                    <h4 class="text-lg font-semibold text-amber-400 mt-4 mb-2">Testschritte</h4>
                     <ol class="list-decimal list-inside space-y-2">
                        <li>Normalzustand mit <code class="bg-gray-700 p-1 rounded">show standby</code> prÃ¼fen (R1=Active, R2=Standby).</li>
                        <li>Dauerhaften Ping vom PC starten: <code class="bg-gray-700 p-1 rounded">ping 192.168.1.1 -t</code>.</li>
                        <li>Ausfall simulieren: Interface auf R1 mit <code class="bg-gray-700 p-1 rounded">shutdown</code> deaktivieren.</li>
                        <li>Ergebnis beobachten: Der Ping wird nur fÃ¼r 1-2 Pakete unterbrochen und lÃ¤uft dann weiter. R2 ist jetzt 'Active'.</li>
                    </ol>
                `
            }
        };


        // --- Event Listeners and Functions ---
        const infoTitle = document.getElementById('info-title');
        const infoContent = document.getElementById('info-content');
        const infoPlaceholder = document.getElementById('info-placeholder');
        
        function showInfo(title, content) {
            infoTitle.innerText = title;
            infoContent.innerHTML = content;
            infoContent.classList.remove('hidden');
            infoPlaceholder.classList.add('hidden');
        }

        function hideInfo() {
            infoContent.classList.add('hidden');
            infoPlaceholder.classList.remove('hidden');
            infoTitle.innerText = 'Info-Panel';
        }

        document.querySelectorAll('.device').forEach(el => {
            const deviceId = el.id.split('-')[1];
            el.addEventListener('mouseover', () => {
                const device = devices[deviceId];
                const content = `<p><strong>Status:</strong> ${device.status}</p><p><strong>Router-ID:</strong> ${device.id}</p><hr class="border-gray-600 my-2">${device.details}`;
                showInfo(device.name, content);
            });
            el.addEventListener('mouseout', hideInfo);
        });
        
        document.querySelectorAll('.zone').forEach(el => {
            const zoneId = el.id.split('-')[1];
            el.addEventListener('mouseover', () => {
                const zone = zones[zoneId];
                showInfo(zone.name, zone.details);
            });
             el.addEventListener('mouseout', hideInfo);
        });

        // Failover Simulation
        const failoverBtn = document.getElementById('failover-btn');
        const r1StatusDot = document.getElementById('r1-status');
        const r1bStatusDot = document.getElementById('r1b-status');
        let isFailedOver = false;

        failoverBtn.addEventListener('click', () => {
            isFailedOver = !isFailedOver;
            if (isFailedOver) {
                devices.r1.status = 'Offline'; devices.r1b.status = 'Active';
                devices.r1.details = devices.r1.details.replace('Active', 'Offline').replace('green', 'red');
                devices.r1b.details = devices.r1b.details.replace('Standby', 'Active').replace('orange', 'green');
                r1StatusDot.setAttribute('fill', '#ef4444'); r1bStatusDot.setAttribute('fill', '#10b981');
                failoverBtn.innerText = 'Stelle R1 wieder her';
                failoverBtn.classList.replace('bg-red-600', 'bg-green-600');
                failoverBtn.classList.replace('hover:bg-red-700', 'hover:bg-green-700');
            } else {
                devices.r1.status = 'Active'; devices.r1b.status = 'Standby';
                devices.r1.details = devices.r1.details.replace('Offline', 'Active').replace('red', 'green');
                devices.r1b.details = devices.r1b.details.replace('Active', 'Standby').replace('green', 'orange');
                r1StatusDot.setAttribute('fill', '#10b981'); r1bStatusDot.setAttribute('fill', '#f97316');
                failoverBtn.innerText = 'Simuliere R1-Ausfall';
                failoverBtn.classList.replace('bg-green-600', 'bg-red-600');
                failoverBtn.classList.replace('hover:bg-green-700', 'hover:bg-red-700');
            }
        });

        // Modal Logic
        const modal = document.getElementById('doc-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalBody = document.getElementById('modal-body');
        const modalCloseBtn = document.getElementById('modal-close-btn');
        const docCards = document.querySelectorAll('.doc-card');

        function openModal(docKey) {
            const doc = docs[docKey];
            if (!doc) return;
            
            modalTitle.innerText = doc.title;
            modalBody.innerHTML = doc.content;
            
            modal.classList.remove('opacity-0', 'pointer-events-none');
            modal.querySelector('.modal-content').classList.remove('scale-95');
        }

        function closeModal() {
            modal.classList.add('opacity-0', 'pointer-events-none');
            modal.querySelector('.modal-content').classList.add('scale-95');
        }

        docCards.forEach(card => {
            card.addEventListener('click', () => {
                openModal(card.dataset.doc);
            });
        });

        modalCloseBtn.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });

    </script>
</body>
</html>
